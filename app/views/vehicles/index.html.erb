<div class="d-flex justify-content-between align-items-center mb-4">
  <h2>My Garage</h2>
  <%= link_to 'Add Vehicle', new_vehicle_path, class: 'btn btn-primary' %>
</div>

<% if @vehicles.any? %>
  <div class="row">
    <% @vehicles.each do |vehicle| %>
      <div class="col-md-6 col-lg-4 mb-4">
        <div class="card h-100 shadow-sm vehicle-card">
          <div class="card-body">
            <h5 class="card-title">
              <%= link_to vehicle.title, vehicle, class: 'text-decoration-none stretched-link' %>
            </h5>
            <p class="text-muted mb-3"><%= vehicle.display_name %></p>

            <div class="row text-center g-2">
              <div class="col-6">
                <div class="stat-box">
                  <div class="stat-value"><%= vehicle.overall_mpg %></div>
                  <div class="stat-label">Avg MPG</div>
                </div>
              </div>
              <div class="col-6">
                <div class="stat-box">
                  <div class="stat-value"><%= number_to_currency(vehicle.cost_per_mile) %></div>
                  <div class="stat-label">Cost/Mile</div>
                </div>
              </div>
              <div class="col-6">
                <div class="stat-box">
                  <div class="stat-value"><%= number_with_delimiter(vehicle.current_odometer || 0) %></div>
                  <div class="stat-label">Odometer</div>
                </div>
              </div>
              <div class="col-6">
                <div class="stat-box">
                  <div class="stat-value"><%= number_to_currency(vehicle.fuel_total_cost) %></div>
                  <div class="stat-label">Fuel Spent</div>
                </div>
              </div>
            </div>

            <% if vehicle.active_reminders.any? %>
              <hr>
              <h6>Active Reminders</h6>
              <% vehicle.active_reminders.each do |reminder| %>
                <span class="badge <%= reminder.overdue? ? 'bg-danger' : 'bg-warning text-dark' %> me-1">
                  <%= reminder.service_type.name %>
                  <% if reminder.miles_remaining %>
                    (<%= number_with_delimiter(reminder.miles_remaining) %> mi)
                  <% end %>
                </span>
              <% end %>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
<% else %>
  <div class="text-center py-5">
    <h4 class="text-muted">No vehicles yet</h4>
    <p>Add your first vehicle to start tracking.</p>
    <%= link_to 'Add Vehicle', new_vehicle_path, class: 'btn btn-primary' %>
  </div>
<% end %>
